import{c as B,j as e,S as v,s as W,V as z,a as K,r as l,P as T,L as q}from"./index-B4Bk8_Yr.js";import{u as F}from"./useSupabaseQuery-DmjYm74X.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),$=[{id:"550e8400-e29b-41d4-a716-446655440000",name:"Klasyczne Strzyżenie",duration:"45 min",price:70,description:"Profesjonalne strzyżenie z myciem i stylizacją",image:"https://img.freepik.com/premium-photo/barber-works-with-hair-clipper-hipster-client-getting-haircut-hands-barber-with-hair-clipper-close-up_293990-1196.jpg?w=740"},{id:"550e8400-e29b-41d4-a716-446655440001",name:"Przycinanie Brody",duration:"30 min",price:50,description:"Formowanie i stylizacja brody do perfekcji",image:"https://img.freepik.com/free-photo/handsome-man-barbershop-shaving-beard_1303-26258.jpg?t=st=1735601291~exp=1735604891~hmac=fd9cd4bea831dcefbb90538386c46bb0b4af08cb0b52cd26148f50381ed331e5&w=740"},{id:"550e8400-e29b-41d4-a716-446655440002",name:"Golenie na Ciepło",duration:"45 min",price:60,description:"Tradycyjne golenie brzytwą z gorącym ręcznikiem",image:"https://images.unsplash.com/photo-1599351431202-1e0f0137899a?auto=format&fit=crop&q=80"}],G=[{id:"550e8400-e29b-41d4-a716-446655440003",name:"Aleksander Nowak",image:"https://img.freepik.com/free-photo/side-view-man-holding-painting-brush_23-2149529894.jpg?t=st=1735641025~exp=1735644625~hmac=5f162f1512445d60e78a247f3ce8ce3bab9057232ffcf35f2a61ffd18395fdb0&w=360",specialties:["Cięcia Klasyczne","Brody","Wzory"],location:"Katowice, ul. Stawowa 15"},{id:"550e8400-e29b-41d4-a716-446655440004",name:"Marek Kowalski",image:"https://img.freepik.com/free-photo/side-view-man-holding-painting-brush_23-2149529894.jpg?t=st=1735641025~exp=1735644625~hmac=5f162f1512445d60e78a247f3ce8ce3bab9057232ffcf35f2a61ffd18395fdb0&w=360",specialties:["Degradacja","Brody","Farbowanie"],location:"Katowice, al. Korfantego 20"},{id:"550e8400-e29b-41d4-a716-446655440005",name:"Dawid Zieliński",image:"https://img.freepik.com/free-photo/side-view-man-holding-painting-brush_23-2149529894.jpg?t=st=1735641025~exp=1735644625~hmac=5f162f1512445d60e78a247f3ce8ce3bab9057232ffcf35f2a61ffd18395fdb0&w=360",specialties:["Cięcia Nowoczesne","Golarki","Zabiegi"],location:"Katowice, ul. Piotra Skargi 10"}],R=({service:s,onClick:t})=>e.jsxs("button",{onClick:t,className:"card cursor-pointer overflow-hidden group",children:[e.jsx("div",{className:"h-48 -mx-6 -mt-6 mb-4 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"})}),e.jsx(v,{className:"w-6 h-6 text-red-500 mb-2"}),e.jsx("h3",{className:"font-bold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-zinc-400 mb-2",children:s.duration}),e.jsxs("p",{className:"font-bold text-red-500",children:[s.price," PLN"]})]}),Z=({barber:s,onClick:t})=>e.jsxs("button",{onClick:t,className:"card cursor-pointer overflow-hidden group",children:[e.jsx("div",{className:"h-48 -mx-6 -mt-6 mb-4 overflow-hidden",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500"})}),e.jsx(v,{className:"w-6 h-6 text-red-500 mb-2"}),e.jsx("h3",{className:"font-bold text-lg",children:s.name}),e.jsx("p",{className:"text-sm text-zinc-400 mb-2",children:s.location})," ",e.jsx("div",{className:"flex flex-wrap gap-2",children:s.specialties.map((i,c)=>e.jsx("span",{className:"text-xs bg-zinc-800 text-zinc-300 px-2 py-1 rounded-full",children:i},c))})]}),A=({currentStep:s,totalSteps:t})=>e.jsx("div",{className:"flex justify-between items-center max-w-xs mx-auto",children:Array.from({length:t},(i,c)=>c+1).map(i=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i<=s?"bg-red-600":"bg-zinc-800"}`,children:i}),i<t&&e.jsx("div",{className:`w-12 h-0.5 ${i<s?"bg-red-600":"bg-zinc-800"}`})]},i))}),M=({slots:s,selectedTime:t,onTimeSelect:i})=>e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-2",children:s.map(c=>e.jsx("button",{onClick:()=>i(c),className:`p-2 rounded-lg text-sm font-medium transition-all
            ${t===c?"bg-red-600 text-white":"bg-zinc-800 hover:bg-zinc-700 text-zinc-100"}`,children:c},c))}),V=({service:s})=>e.jsx("div",{className:"card bg-zinc-900/30",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:s.name}),e.jsxs("p",{className:"text-sm text-zinc-400",children:[s.duration," • ",s.price," PLN"]})]})]})}),D=async s=>{try{const{data:t,error:i}=await W.from("bookings").insert([{service_id:s.service_id,barber_id:s.barber_id,customer_name:s.customer_name,customer_email:s.customer_email,customer_phone:s.customer_phone,booking_date:s.booking_date,booking_time:s.booking_time,total_amount:s.total_amount,extras:s.extras_ids||[],status:"pending"}]).select().single();if(i)throw i;return z.success("Rezerwacja została pomyślnie utworzona!"),t}catch(t){throw console.error("Error creating booking:",t),z.error("Wystąpił błąd podczas tworzenia rezerwacji"),t}},Q=["10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"],O=()=>{const s=K(),[t,i]=l.useState(null),[c,k]=l.useState(null),[x,_]=l.useState(""),[u,S]=l.useState(""),[d,C]=l.useState([]),[n,j]=l.useState(1),[p,g]=l.useState(!1),[o,P]=l.useState({customerName:"",customerEmail:"",customerPhone:""}),{data:N}=F("extras",{order:{column:"name",ascending:!0}});l.useEffect(()=>(document.body.classList.add("no-navbar"),()=>document.body.classList.remove("no-navbar")),[]);const h=()=>{n<5&&j(n+1)},b=()=>{n>1&&j(n-1)},E=a=>{C(r=>r.find(m=>m.id===a.id)?r.filter(m=>m.id!==a.id):[...r,a])},w=()=>{let a=t?Number(t.price):0;return d.forEach(r=>{a+=Number(r.price)}),a},L=async a=>{if(a.preventDefault(),!(!t||!c)){g(!0);try{await D({service_id:t.id,barber_id:c.id,customer_name:o.customerName,customer_email:o.customerEmail,customer_phone:o.customerPhone,booking_date:x,booking_time:u,total_amount:w(),extras_ids:d.map(r=>r.id)}),s("/")}catch(r){console.error("Error submitting booking:",r)}finally{g(!1)}}},f=a=>{const{name:r,value:y}=a.target;P(m=>({...m,[r]:y}))};return e.jsx("div",{className:"min-h-screen pt-20 pb-12 bg-gradient-to-b from-black via-zinc-900 to-black",children:e.jsx("div",{className:"container-custom max-w-4xl",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-24 w-auto mb-6 mx-auto"}),e.jsx("h1",{className:"text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-500 to-orange-500",children:"Zarezerwuj swój styl"}),e.jsx("p",{className:"text-zinc-400",children:"Luksusowe doświadczenie w barbershopie w Katowicach"})]}),e.jsx(A,{currentStep:n,totalSteps:5}),e.jsxs("div",{className:"card backdrop-blur-xl",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Wybierz usługę"}),e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4",children:$.map(a=>e.jsx(R,{service:a,onClick:()=>{i(a),h()}},a.id))})]}),n===2&&N&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Chcesz dodać coś ekstra?"}),e.jsx("p",{className:"text-zinc-400",children:"Wybierz dodatkowe usługi, aby ulepszyć swoje doświadczenie"}),e.jsx("div",{className:"grid gap-4",children:N.map(a=>e.jsx("div",{className:`p-4 rounded-lg border transition-all cursor-pointer ${d.find(r=>r.id===a.id)?"border-red-500 bg-red-500/10":"border-zinc-800 hover:border-red-500/50"}`,onClick:()=>E(a),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-zinc-400",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"font-bold text-red-500",children:[a.price," PLN"]}),d.find(r=>r.id===a.id)?e.jsx(I,{className:"w-5 h-5 text-red-500"}):e.jsx(T,{className:"w-5 h-5 text-zinc-400"})]})]})},a.id))}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:b,className:"btn-primary bg-zinc-800",children:"Wstecz"}),e.jsx("button",{onClick:h,className:"btn-primary",children:"Dalej"})]})]}),n===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Wybierz fryzjera"}),e.jsx("div",{className:"grid sm:grid-cols-2 md:grid-cols-3 gap-4",children:G.map(a=>e.jsx(Z,{barber:a,onClick:()=>{k(a),h()}},a.id))})]}),n===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Wybierz datę i godzinę"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"date",value:x,onChange:a=>_(a.target.value),className:"input-field",required:!0}),e.jsx(M,{slots:Q,selectedTime:u,onTimeSelect:S})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{onClick:b,className:"btn-primary bg-zinc-800",children:"Wstecz"}),e.jsx("button",{onClick:h,disabled:!x||!u,className:"btn-primary disabled:opacity-50",children:"Dalej"})]})]}),n===5&&e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Twoje dane"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",name:"customerName",value:o.customerName,onChange:f,placeholder:"Imię i nazwisko",className:"input-field",required:!0}),e.jsx("input",{type:"tel",name:"customerPhone",value:o.customerPhone,onChange:f,placeholder:"Telefon",className:"input-field",required:!0}),e.jsx("input",{type:"email",name:"customerEmail",value:o.customerEmail,onChange:f,placeholder:"Email",className:"input-field",required:!0})]}),e.jsxs("div",{className:"mt-8 space-y-4 border-t border-zinc-800 pt-6",children:[e.jsx("h3",{className:"font-semibold",children:"Podsumowanie zamówienia"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:t==null?void 0:t.name}),e.jsxs("span",{children:[t==null?void 0:t.price," PLN"]})]}),d.map(a=>e.jsxs("div",{className:"flex justify-between text-sm text-zinc-400",children:[e.jsx("span",{children:a.name}),e.jsxs("span",{children:[a.price," PLN"]})]},a.id)),e.jsxs("div",{className:"border-t border-zinc-800 pt-2 flex justify-between font-bold",children:[e.jsx("span",{children:"Razem"}),e.jsxs("span",{children:[w()," PLN"]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsx("button",{type:"button",onClick:b,className:"btn-primary bg-zinc-800",disabled:p,children:"Wstecz"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-5 h-5 animate-spin mr-2"}),"Przetwarzanie..."]}):"Potwierdź rezerwację"})]})]})]}),t&&e.jsx(V,{service:t})]})})})};export{O as default};
